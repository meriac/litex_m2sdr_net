[![License](https://img.shields.io/badge/License-BSD%202--Clause-orange.svg)](LICENSE)

# LiteX Etherbone Network CLI

`litex_netcli.py` is an interactive command line tool for reading and writing
CSR registers on any [LiteX](https://github.com/enjoy-digital/litex) FPGA over
[Etherbone](https://ohwr.org/project/etherbone-core/wikis/home)/UDP.

## What is Etherbone?

[Etherbone](https://ohwr.org/project/etherbone-core/wikis/home) is a protocol
that tunnels Wishbone bus transactions over UDP/IP. A LiteX SoC with an Ethernet
core and Etherbone bridge exposes its entire CSR register space over the network,
allowing remote register access without JTAG or PCIe. The tool connects to the
FPGA's Etherbone port (default `192.168.1.50:1234`) and provides an interactive
REPL for register inspection and control.

## Installation

A Python [virtual environment](https://docs.python.org/3/library/venv.html)
keeps this project's dependencies isolated from your system Python, avoiding
version conflicts between projects. Create one, activate it, and install the
required packages:

```bash
python3 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
```

Activate the environment in each new terminal before running the tool:

```bash
source .venv/bin/activate
```

## Quick start

```bash
# Start interactive mode with CSR register names
./litex_netcli.py -c csr.csv -i

# Run a script of commands
./litex_netcli.py -c csr.csv -s commands.m2sdr

# Execute commands directly (bare values, ideal for shell scripting)
./litex_netcli.py -c csr.csv -e "read ctrl_scratch; regs xadc_*"

# Use in shell scripts
echo "FPGA serial number:" $(./litex_netcli.py -c csr.csv -e "read dna_id")
```

Inside the interactive REPL:

```
litex> read ctrl_scratch
ctrl_scratch @ 0x00000004 = 0x12345678
litex> regs xadc_*
[0x00002000] = 0x000009ee	# xadc_temperature
[0x00002004] = 0x00000557	# xadc_vccint
...
```

See [docs/netcli.md](docs/netcli.md) for the full command line reference.

## CSR CSV

The CSR CSV file is auto-generated by LiteX when building the FPGA bitstream.
It maps human-readable register names (e.g. `ctrl_scratch`, `xadc_temperature`)
to their hardware addresses, so you can use `read ctrl_scratch` instead of
`read 0x4`. It is also required for the `regs` command to dump all registers
by name.

## Example: LiteX M.2 SDR

See [docs/example-litex_m2sdr.md](docs/example-litex_m2sdr.md) for a complete
walkthrough using the [LiteX M.2 SDR](https://github.com/enjoy-digital/litex_m2sdr)
board, including hardware setup, firmware flashing, and example sessions.

## License

BSD-2-Clause
